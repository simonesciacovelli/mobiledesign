<!DOCTYPE html>
<html>
<head>
<script src="p5.min.js" type="text/javascript"></script> 
<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
	<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script language="javascript" type="text/javascript" src="turtle.js"></script>

</head>
<body>


<!-- <div class="parameters"></div> -->

	<style type="text/css">
		

		html, body{
			/*background-color: black;*/
			margin: 0px;
		}

		canvas{
      margin-right: 120px;
      padding:20px;
    }

		p{
			font-size: 20px;
			font-family: 'Roboto', sans-serif;
			padding:14px;
      margin-left: 150px;
			color: white;
			border-radius: 5px;
			width: 210px;
			text-align: center;
			font-weight: 700;
			background-color: black;

		}

		.parameters{
			width: 290px;
			height: 353px;
			position: fixed;
			background-color: #f0f0f0;
			padding:10px;
			padding-left: 40px;
			padding-right: 1px;
			border-radius: 10px;
			border-bottom-left-radius: 0px;
			border-top-left-radius: 0px;

		}

input[type=range] {
  -webkit-appearance: none;
  margin: 28px 0;
  width: 240px;
}

input[type=range]:focus {
  outline: none;
}

input[type=range]::-webkit-slider-runnable-track {
  width: 250px;
  height: 8.4px;
  cursor: pointer;
  animate: 0.1s;
  margin-left: 150px;
  margin-right: -150px;
  background: #e8e8e8;
  border-radius: 20px;
  transition: 0.2s;
  /*border: 0.2px solid #010101;*/
}


input[type=range]::-webkit-slider-thumb {
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
  /*border: 1px solid #000000;*/
  height: 26px;
  width: 26px;
  border-radius: 20px;
  background: #bbbbbb;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: -9px;

  transition: 0.2s;
}



input[type=range]:focus::-webkit-slider-thumb {
  background: black;
  transition: 0.2s;
}

input[type=range]:hover::-webkit-slider-thumb {
  background: #8a8a8a;
  transition: 0.2s;
}

input[type=range]:focus::-webkit-slider-runnable-track {
  background: #bbbbbb;
  transition: 0.2s;
}


input[type=range]::-moz-range-track {
  width: 100%;

  height: 8.4px;
  cursor: pointer;
  animate: 0.2s;
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
  background: #3071a9;
  border-radius: 1.3px;
  /*border: 0.2px solid #010101*/;
}
input[type=range]::-moz-range-thumb {
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
  border: 1px solid #000000;
  height: 36px;

  width: 16px;
  border-radius: 3px;
  background: #ffffff;
  cursor: pointer;
}
input[type=range]::-ms-track {
  width: 100%;
  height: 8.4px;

  cursor: pointer;
  animate: 0.2s;
  background: transparent;
  border-color: transparent;
  border-width: 16px 0;
  color: transparent;
}
input[type=range]::-ms-fill-lower {
  background: #2a6495;

  border: 0.2px solid #010101;
  border-radius: 2.6px;
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
}
input[type=range]::-ms-fill-upper {
  background: #3071a9;
  border: 0.2px solid #010101;
  border-radius: 2.6px;
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
}
input[type=range]::-ms-thumb {
  /*box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;*/
  /*border: 1px solid #000000;*/
  height: 36px;
  width: 16px;
  border-radius: 3px;
  background: green;
  cursor: pointer;
}

input[type=range]:focus::-ms-fill-lower {
  background: #3071a9;
}
input[type=range]:focus::-ms-fill-upper {
  background: #367ebd;
}



input[type=color]:focus {
  outline: none;
}


input[type="color"] {
	-webkit-appearance: none;
	border: none;
	width: 234px;
	height: 132px;
	border-radius: 20px;
	cursor: pointer;
	margin-bottom: 50px
}
input[type="color"]::-webkit-color-swatch-wrapper {
	padding: 0;
}

input[type="color"]::-webkit-color-swatch {
	border: none;
	transition: 0.3s;
	border-radius: 5px
}

input[type="color"]:hover::-webkit-color-swatch {
	border: none;
	transition: 0.3s;
	border-radius: 15px
}

#slider{

}


</style>





<script type="text/javascript">
// require https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.16/p5.min.js


var testImage;

function preload() {
    testImage = loadImage("/pixels/sketches/world_100.png");
    noLoop();
}

function setup() {
    // create a place to draw
    createCanvas(500, 500);


}


function draw() {
    // clear the background
    background(255);
    var start, end;
    var testImageCopy = createImage(100, 100);

    noSmooth();

    // draw original image
    image(testImage, 0, 0);

    // invert and draw
    testImageCopy.copy(testImage, 0, 0, 100, 100, 0, 0, 100, 100);
    start = millis();
    invertStandard(testImageCopy);
    end = millis();
    console.log("invertStandard: ", end - start);
    image(testImageCopy, 100, 0);

    // invert and draw
    testImageCopy.copy(testImage, 0, 0, 100, 100, 0, 0, 100, 100);
    start = millis();
    invertQuick(testImageCopy);
    end = millis();
    console.log("invertQuick: ", end - start);
    image(testImageCopy, 200, 0);


    noLoop();
}


//var pixelRed = img.pixels[(y * 640 + x) * 4];
function invertStandard(img) {

    for (y = 0; y < img.height; y++) {
        for (x = 0; x < img.width; x++) {


            var c = img.get(x, y);
            c = [
                255 - c[0],
                255 - c[1],
                255 - c[2],
                c[3],
            ];
            img.set(x, y, c);
            img.updatePixels();

        }
    }
}


function invertQuick(img) {
    // load up the pixel[] array so we can read colors out of it
    img.loadPixels();


    for (y = 0; y < img.height; y++) {
        for (x = 0; x < img.width; x++) {


            var c = getQuick(img, x, y);
            c = [
                255 - c[0],
                255 - c[1],
                255 - c[2],
                c[3],
            ];
            img.set(x, y, c);


        }
    }

    img.updatePixels();
}



// find the RGBA values of the pixel at x, y in the img.pixels array
// see: http://p5js.org/reference/#/p5/pixels[]
// we don't need to worry about screen pixel density here, because we are not reading from the screen

function getQuick(img, x, y) {

    var i = (y * img.width + x) * 4;
    return [
        testImage.pixels[i],
        testImage.pixels[i + 1],
        testImage.pixels[i + 2],
        testImage.pixels[i + 3],
    ];
}

	</script>


</body>
</html>